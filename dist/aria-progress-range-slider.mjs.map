{"version":3,"file":"aria-progress-range-slider.mjs","sources":["../src/helpers.ts","../src/index.ts"],"sourcesContent":["export function getElementLeft(el) {\n  let left = 0;\n  let element = el;\n\n  // Loop through the DOM tree\n  // and add it's parent's offset to get page offset\n  do {\n    left += element.offsetLeft || 0;\n    element = element.offsetParent;\n  } while (element);\n\n  return left;\n}\n","import { getElementLeft } from './helpers';\n\n/*\n|                                       | track\n|=========                              | progress\n|         O                             | handle\n|       [ X ]                           | value tooltip\n|---------------------------            | hover\n|                        [ Y ]          | hover value tooltip\n|--------------------                   | buffer\n*/\n\n// https://www.w3.org/TR/wai-aria-practices/examples/slider/slider-1.html\n\ntype TSelectorOrElement = HTMLElement | Element | string;\n\ninterface UIEvent {\n  touches?: Touch[];\n  pageX?: number\n  preventDefault():any\n}\n\ninterface IProgressBarOptions {\n  ariaLabel: string\n  ariaLabeledBy?: string,\n  arrowMoveStep: number\n  className: string\n  disabled: boolean\n  float: boolean\n  getTooltipText(value:number, options?:IProgressBarOptions):string\n  getValueText(value:number, options?:IProgressBarOptions):string\n  initialValue: number\n  max: number\n  min: number\n  onChange?(value:number, options?:IProgressBarOptions):any\n  onDragEnd?(value:number, options?:IProgressBarOptions):any\n  onDragMove?(value:number, options?:IProgressBarOptions):any\n  onDragStart?(value:number, options?:IProgressBarOptions):any\n  pageMoveStep: number,\n  snap: boolean\n  step: number\n}\n\ninterface IProgressBarOptionsPartial {\n  ariaLabel?: string\n  ariaLabeledBy?: string,\n  arrowMoveStep?: number\n  className?: string\n  disabled?: boolean\n  float?: boolean\n  getTooltipText?(value:number, options?:IProgressBarOptions):string\n  getValueText?(value:number, options?:IProgressBarOptions):string\n  initialValue?: number\n  max?: number\n  min?: number\n  onChange?(value:number, options?:IProgressBarOptions):any\n  onDragEnd?(value:number, options?:IProgressBarOptions):any\n  onDragMove?(value:number, options?:IProgressBarOptions):any\n  onDragStart?(value:number, options?:IProgressBarOptions):any\n  pageMoveStep?: number,\n  snap?: boolean\n  step?: number\n}\n\nconst DEFAULT_OPTIONS:IProgressBarOptions = {\n  ariaLabel: 'Seek slider',\n  arrowMoveStep: 1,\n  pageMoveStep: 5,\n  className: 'AriaProgressBar',\n  disabled: false,\n  float: false,\n  getTooltipText: (value:number, options:IProgressBarOptions) => {\n    if (options.float) {\n      return value.toString();\n    }\n\n    return Math.round(value).toString();\n  },\n  getValueText: (value:number, options:IProgressBarOptions) => {\n    // TODO think of a more friendly label\n    return `${ value } ranging from ${ options.min } to ${ options.max }`\n  },\n  initialValue: 0,\n  max: 100,\n  min: 0,\n  snap: true,\n  step: 1,\n};\n\nconst keyCodes = {\n  PAGE_UP: 33,\n  PAGE_DOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n}\n\nclass ProgressBar {\n  // HTML Elements\n  private element:HTMLElement;\n  private handleElement:HTMLElement;\n  private trackElement:HTMLElement;\n  private progressElement:HTMLElement;\n  private bufferElement:HTMLElement;\n  private hoverElement:HTMLElement;\n  private valueTooltipElement:HTMLElement;\n  private hoverTooltipElement:HTMLElement;\n\n  private options:IProgressBarOptions;\n  private value:number;\n  private realValue:number;\n  private range:number;\n  private isDragging:boolean = false;\n  private isMouseOver:boolean = false;\n  private isDestroyed:boolean = false;\n\n  private previousTouch: Touch = null;\n\n  private elementLeft:number;\n\n  constructor(selectorOrElement:TSelectorOrElement, options:IProgressBarOptionsPartial) {\n    if (typeof selectorOrElement === 'string') {\n      this.element = document.querySelector(selectorOrElement);\n    } else {\n      this.element = selectorOrElement as HTMLElement;\n    }\n\n    if (!(this.element instanceof HTMLElement)) {\n      throw('Given HTML element is not valid or doesn\\'t exist.')\n    }\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ...options,\n    };\n\n    this.range = this.options.max - this.options.min;\n\n    this.createElements();\n\n    if (this.options.disabled) {\n      this.disable();\n    }\n\n    let value = 0;\n\n    if (this.options.initialValue) {\n      value = (this.options.initialValue - this.options.min) / this.range\n    }\n\n    this.updateValue(value);\n    this.setAriaProps();\n\n\n    // For IE only\n    this.updateHoverTooltip(value);\n  }\n\n  // DOM\n\n  private createElement(elementName:string, parentElement:HTMLElement) {\n    const element = document.createElement('div');\n    element.className = this.getClassName(elementName);\n\n    parentElement.appendChild(element);\n\n    return element;\n  }\n\n  private createElements() {\n    this.trackElement = this.createElement('track', this.element);\n    this.progressElement = this.createElement('progress', this.trackElement);\n    this.hoverElement = this.createElement('hover', this.trackElement);\n    this.bufferElement = this.createElement('buffer', this.trackElement);\n    this.handleElement = this.createElement('handle', this.element);\n\n    if (this.options.getTooltipText) {\n      this.valueTooltipElement = this.createElement('mainTooltip', this.element);;\n      this.hoverTooltipElement = this.createElement('hoverTooltip', this.element);\n    }\n\n    this.element.classList.add(this.options.className);\n\n    this.element.setAttribute('tabindex', '0');\n    this.element.setAttribute('role', 'slider');\n    this.element.setAttribute('aria-valuemin', '0');\n\n    this.setOptions();\n\n    // Dragging\n    // Touch events\n    this.element.addEventListener('touchstart', this.handleTouchStart);\n\n    window.addEventListener('touchmove', this.handleTouchMove, {\n      capture: false,\n      passive: false,\n    });\n    window.addEventListener('touchend', this.handleDragEnd);\n\n    // Dragging and hover\n    // Mouse events\n    this.element.addEventListener('mouseenter', this.handleMouseEnter);\n    this.element.addEventListener('mouseleave', this.handleMouseLeave);\n    this.element.addEventListener('mousedown', this.handleDragStart);\n\n    window.addEventListener('mouseup', this.handleDragEnd);\n    window.addEventListener('mousemove', this.handleMouseMove, false);\n\n    // Keyboard events\n    this.element.addEventListener('keydown', this.handleKeyDown);\n\n    // TODO decide if mouse wheel support should be added\n  }\n\n  private getClassName(elementName:string, modifier:string = null) {\n    if (modifier) {\n      return `${ this.options.className }-${ elementName }--${ modifier }`;\n    }\n\n    return `${ this.options.className }-${ elementName }`;\n  }\n\n  // Event handlers\n\n  private handleMouseEnter = () => {\n    if (this.options.disabled) {\n      return;\n    }\n\n    this.isMouseOver = true;\n    this.elementLeft = getElementLeft(this.element);\n    this.element.classList.add(`${ this.options.className }--hover`);\n  }\n\n  private handleMouseLeave = () => {\n    this.isMouseOver = false;\n    this.setHoverScale(0);\n    this.element.classList.remove(`${ this.options.className }--hover`);\n  }\n\n  private handleDragStart = (e:UIEvent) => {\n    if (this.options.disabled) {\n      return;\n    }\n\n    this.isDragging = true;\n    this.element.classList.add(`${ this.options.className }--dragging`);\n    this.elementLeft = getElementLeft(this.element);\n\n    const value = this.getValueFromEvent(e);\n    this.updateValue(value);\n\n    if (this.options.onDragStart) {\n      this.options.onDragStart(this.realValue, this.options);\n    }\n  }\n\n  private handleDragEnd = () => {\n    this.firstTouch = null;\n    this.hasTouchStarted = false;\n\n    if (this.isDragging) {\n      if (this.options.onDragEnd) {\n        this.options.onDragEnd(this.realValue, this.options);\n      }\n\n      if (this.options.onChange) {\n        this.options.onChange(this.realValue, this.options);\n      }\n    }\n\n    this.isDragging = false;\n    this.element.classList.remove(`${ this.options.className }--dragging`);\n\n    // TODO if need this for  IE only\n    // this.updateHoverTooltip(this.value);\n  }\n\n  private handleMouseMove = (e:UIEvent) => {\n    if (!this.isDragging && !this.isMouseOver || this.options.disabled) {\n      return;\n    }\n\n    const value = this.getValueFromEvent(e);\n\n    this.updateHoverTooltip(value);\n\n    if (this.isDragging) {\n      this.handleDragMove(value);\n    } else if (this.isMouseOver) {\n      this.setHoverScale(value);\n    }\n  }\n\n  hasTouchStarted = false;\n  firstTouch = null;\n  private handleTouchStart = (e:TouchEvent) => {\n    this.hasTouchStarted = true;\n    this.firstTouch = e.touches[0];\n  }\n\n  private handleTouchMove = (e:UIEvent) => {\n    if (!this.hasTouchStarted || this.options.disabled) {\n      return;\n    }\n\n    const getDeltaX = (touchA : Touch, touchB: Touch) => {\n      return Math.abs(touchA.clientX - touchB.clientX);\n    };\n    const getDeltaY = (touchA : Touch, touchB: Touch) => {\n      return Math.abs(touchA.clientY - touchB.clientY);\n    };\n\n    if (getDeltaX(e.touches[0], this.firstTouch) > 100 && !this.isDragging) {\n      this.handleDragStart(e);\n    }\n\n    if (!this.isDragging) {\n      return;\n    }\n\n    if (this.previousTouch) {\n      const deltaX = getDeltaX(e.touches[0], this.previousTouch);\n      const deltaY = getDeltaY(e.touches[0], this.previousTouch);\n      if (deltaX > deltaY) {\n        e.preventDefault();\n      } else {\n        return;\n      }\n    }\n    \n    this.previousTouch = e.touches[0] as Touch;\n\n    const value = this.getValueFromEvent(e);\n\n    this.handleDragMove(value);\n  }\n\n  private handleDragMove(value:number) {\n    const previousRealValue = this.realValue;\n    this.updateValue(value);\n\n    if (previousRealValue !== this.realValue && this.options.onDragMove) {\n      this.options.onDragMove(this.realValue, this.options);\n    }\n  }\n\n  private handleKeyDown = (e:KeyboardEvent) => {\n    if (this.options.disabled) {\n      return;\n    }\n\n    const stepArrow = this.options.arrowMoveStep / this.range;\n    const stepPage = this.options.pageMoveStep / this.range;\n\n    /*\n      Up and Right arrows increase slider value for \"arrowMoveStep\" (default 1)\n      Down and Left arrows decrease slider value for \"arrowMoveStep\" (default 1)\n      Page Up\tincreases slider value for \"pageMoveStep\" (default 10)\n      Page Down\tdecreases slider value for \"pageMoveStep\" (default 10)\n      Home sets slider to its minimum value.\n      End\tsets slider to its maximum value.\n    */\n    const stepMap = {\n      [keyCodes.HOME]: -1,\n      [keyCodes.END]: 1,\n      [keyCodes.PAGE_DOWN]: -stepPage,\n      [keyCodes.PAGE_UP]: stepPage,\n      [keyCodes.DOWN]: -stepArrow,\n      [keyCodes.LEFT]: -stepArrow,\n      [keyCodes.UP]: stepArrow,\n      [keyCodes.RIGHT]: stepArrow,\n    }\n\n    const step = stepMap[e.keyCode];\n\n    if (typeof step === 'number') {\n      const previousRealValue = this.getRealValue();\n\n      this.updateValue(this.includeStep(this.value + step));\n\n      if (previousRealValue !== this.realValue && this.options.onChange) { // TODO\n        this.options.onChange(this.realValue, this.options);\n      }\n    }\n  }\n\n  private getValueFromEvent(e:UIEvent) {\n    const elementWidth = this.element.offsetWidth;\n    let x;\n\n    if (e.touches && e.touches.length === 1) {\n      x = e.touches[0].pageX - this.elementLeft;\n    } else if (e.pageX) {\n      x = e.pageX - this.elementLeft;\n    } else {\n      return 0;\n    }\n\n    if (x < 0) {\n      x = 0;\n    } else if (x > elementWidth) {\n      x = elementWidth;\n    }\n\n    return this.includeStep(x / elementWidth);\n  }\n\n  private setOptions() {\n    this.element.setAttribute('aria-valuemax', this.options.max.toString());\n    this.element.setAttribute('aria-label', this.options.ariaLabel);\n\n    if (this.options.ariaLabeledBy) {\n      this.element.setAttribute('aria-labeledby', this.options.ariaLabeledBy);\n    }\n  }\n\n  private setAriaProps() {\n    this.element.setAttribute('aria-valuenow', this.realValue.toString());\n    this.element.setAttribute('aria-valuetext', this.options.getValueText(this.realValue, this.options))\n  }\n\n  private limitValue(value:number) {\n    if (value < 0) {\n      return 0;\n    } else if (value > 1) {\n      return 1;\n    }\n\n    return value;\n  }\n\n  private includeStep(value:number) {\n    const step = this.options.step / this.range;\n\n    if (this.options.snap) {\n      value = Math.round(value / step) * step;\n      value = value * this.range / this.range;\n    }\n\n    value = this.limitValue(value);\n\n    return value;\n  }\n\n  private updateTooltip(value:number, realValue:number, element:HTMLElement) {\n    if (this.options.getTooltipText) {\n      element.style.left = `${ value * 100 }%`;\n      element.innerHTML = this.options.getTooltipText(realValue, this.options);\n    }\n  }\n\n  private updateValueTooltip(value:number) {\n    this.updateTooltip(value, this.realValue, this.valueTooltipElement);\n  }\n\n  private updateHoverTooltip(value:number) {\n    const hoverValue = value * this.range + this.options.min;\n\n    this.updateTooltip(value, parseFloat(hoverValue.toFixed(4)), this.hoverTooltipElement);\n  }\n\n  private updateValue(value:number) {\n    this.handleElement.style.left = `${ value * 100 }%`;\n    this.progressElement.style.width = `${ value * 100 }%`;\n\n    if (this.value !== value || typeof value === 'undefined') {\n      const previousRealValue = this.getRealValue();\n\n      this.value = value;\n      this.realValue = this.getRealValue();\n\n      if (this.realValue !== previousRealValue) {\n        this.setAriaProps();\n        this.updateValueTooltip(value);\n      }\n\n      if (this.isDragging) {\n        this.setHoverScale(0);\n      }\n    }\n  }\n\n  private setHoverScale(value:number) {\n    this.hoverElement.style.width = `${ value * 100 }%`;\n  }\n\n  private getRealValue() {\n    const value = this.value * this.range + this.options.min;\n\n    return parseFloat(value.toFixed(4));\n  }\n\n  private unbind() {\n    // Touch events\n    this.element.removeEventListener('touchstart', this.handleTouchStart);\n    window.removeEventListener('touchmove', this.handleTouchMove);\n    window.removeEventListener('touchend', this.handleDragEnd);\n\n    // Dragging and hover\n    // Mouse events\n    this.element.removeEventListener('mouseenter', this.handleMouseEnter);\n    this.element.removeEventListener('mouseleave', this.handleMouseLeave);\n    this.element.removeEventListener('mousedown', this.handleDragStart);\n\n    window.removeEventListener('mouseup', this.handleDragEnd);\n    window.removeEventListener('mousemove', this.handleMouseMove);\n\n    // Keyboard events\n    this.element.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  // Public\n  public getValue() {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is destroyed, options: ', this.options);\n      return;\n    }\n\n    return this.realValue;\n  }\n\n  public setValue(value:number) {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is destroyed, options: ', this.options);\n      return;\n    }\n\n    if (this.isDragging) {\n      return;\n    }\n\n    this.updateValue(this.includeStep(value / this.range));\n  }\n\n  public setBufferValue(value:number) {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is destroyed, options: ', this.options);\n      return;\n    }\n\n    this.bufferElement.style.width = `${ value / this.range }%`;\n }\n\n  public disable() {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is destroyed, options: ', this.options);\n      return;\n    }\n\n    this.options.disabled = true;\n    this.element.classList.add(`${ this.options.className }--disabled`);\n    this.element.setAttribute('aria-disabled', 'true');\n    this.element.setAttribute('disabled', 'true');\n    this.element.setAttribute('tabindex', '-1');\n  }\n\n  public enable() {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is destroyed, options: ', this.options);\n      return;\n    }\n\n    this.options.disabled = false;\n    this.element.classList.remove(`${ this.options.className }--disabled`);\n    this.element.setAttribute('tabindex', '0');\n  }\n\n  public destroy() {\n    if (this.isDestroyed) {\n      console.warn('ProgressBar instance is already destroyed');\n      return;\n    }\n\n    // Unbind everything\n    this.unbind();\n\n    // Empty element\n    this.element.innerHTML = '';\n\n\n    this.isDestroyed = true;\n\n    this.element.classList.remove(this.options.className);\n\n    this.element.removeAttribute('tabindex');\n    this.element.removeAttribute('role');\n    this.element.removeAttribute('aria-valuemin');\n    this.element.removeAttribute('aria-valuemax');\n    this.element.removeAttribute('aria-label');\n    this.element.removeAttribute('aria-valuenow');\n    this.element.removeAttribute('aria-valuetext');\n\n    if (this.options.ariaLabeledBy) {\n      this.element.removeAttribute('aria-labeledby');\n    }\n  }\n}\n\nexport default ProgressBar;\n\n"],"names":["getElementLeft","el","left","element","offsetLeft","offsetParent","DEFAULT_OPTIONS","ariaLabel","arrowMoveStep","pageMoveStep","className","disabled","float","getTooltipText","value","options","toString","Math","round","getValueText","initialValue","max","min","snap","step","ProgressBar","constructor","selectorOrElement","this","isMouseOver","elementLeft","classList","add","setHoverScale","remove","e","isDragging","getValueFromEvent","updateValue","onDragStart","realValue","firstTouch","hasTouchStarted","onDragEnd","onChange","updateHoverTooltip","handleDragMove","touches","getDeltaX","touchA","touchB","abs","clientX","handleDragStart","previousTouch","clientY","preventDefault","stepArrow","range","stepPage","stepMap","keyCode","previousRealValue","getRealValue","includeStep","document","querySelector","HTMLElement","Object","createElements","disable","setAriaProps","createElement","elementName","parentElement","getClassName","appendChild","trackElement","progressElement","hoverElement","bufferElement","handleElement","valueTooltipElement","hoverTooltipElement","setAttribute","setOptions","addEventListener","handleTouchStart","window","handleTouchMove","capture","passive","handleDragEnd","handleMouseEnter","handleMouseLeave","handleMouseMove","handleKeyDown","modifier","onDragMove","x","elementWidth","offsetWidth","length","pageX","ariaLabeledBy","limitValue","updateTooltip","style","innerHTML","updateValueTooltip","parseFloat","toFixed","width","unbind","removeEventListener","getValue","isDestroyed","console","warn","setValue","setBufferValue","enable","destroy","removeAttribute"],"mappings":"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"}